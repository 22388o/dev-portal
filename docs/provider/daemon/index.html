<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.0">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="TDEX Network Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="TDEX Network Blog Atom Feed"><title data-react-helmet="true">Daemon | TDEX Network</title><meta data-react-helmet="true" property="og:url" content="https://dev.tdex.network/docs/provider/daemon"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Daemon | TDEX Network"><meta data-react-helmet="true" name="description" content="Daemon implementation to execute automated market marking strategies on top of TDEX"><meta data-react-helmet="true" property="og:description" content="Daemon implementation to execute automated market marking strategies on top of TDEX"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://dev.tdex.network/docs/provider/daemon"><link data-react-helmet="true" rel="alternate" href="https://dev.tdex.network/docs/provider/daemon" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://dev.tdex.network/docs/provider/daemon" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.f0a9fb51.css">
<link rel="preload" href="/assets/js/runtime~main.44ec4ed4.js" as="script">
<link rel="preload" href="/assets/js/main.2a65be00.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/tdex-logo.png" alt="TDEX logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/tdex-logo.png" alt="TDEX logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Developer Portal</strong></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/tdex-network" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--checked react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" checked="" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/tdex-logo.png" alt="TDEX logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/tdex-logo.png" alt="TDEX logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Developer Portal</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/docs/">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">Blog</a></li><li class="menu__list-item"><a href="https://github.com/tdex-network" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/">Introduction</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Trader</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/trader/intro">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/trader/app">Mobile App</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/trader/browser">Browser App</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/trader/cli">CLI</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">SDK</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/trader/SDK/javascript">JavaScript</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Liquidity Provider</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/provider/intro">Overview</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/provider/daemon">Daemon</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/provider/registry">Registry</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Daemon</h1></header><div class="markdown"><p>Daemon implementation to execute automated market marking strategies on top of TDEX</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="overview"></a>Overview<a class="hash-link" href="#overview" title="Direct link to heading">#</a></h2><p>The daemon exposes two HTTP/2 gRPC interfaces, one meant to be public to be consumed by traders that fully implements <a href="https://github.com/tdex-network/tdex-specs/blob/master/04-trade-protocol.md" target="_blank" rel="noopener noreferrer">BOTD #4</a> called <strong>trader interface</strong> (by default on the port <strong>9945</strong>) and another private to be consumed by the liquidity provider for internal management called <strong>operator interface</strong> by default on the port <strong>9000</strong>).</p><p>The daemon has an embedded Liquid wallet and sources blockchain information via a block explorer. At the time of writing the supported explorers are the <a href="https://github.com/blockstream/electrs" target="_blank" rel="noopener noreferrer">Blockstream fork of Electrs</a>, and the Elements node. By default the first is used and the daemon connects to <a href="https://blockstream.info/liquid/api/" target="_blank" rel="noopener noreferrer">Blockstream.info</a></p><p><strong>Operator API</strong></p><p>The API for the operator interface are documented <a href="https://github.com/TDex-network/tdex-protobuf/blob/beta/docs/docs.md#operator" target="_blank" rel="noopener noreferrer">here</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="data-directory"></a>Data directory<a class="hash-link" href="#data-directory" title="Direct link to heading">#</a></h2><p>The first time you run the daemon, it creates a <strong>data directory</strong> in <code>~/.tdex-daemon</code> and it is used to persist the wallet and the state in an embedded database.
It&#x27;s possible to use a different path for the data directory exporting the environment variable <code>TDEX_DATA_DIR_PATH</code>. If you use docker you must mount the volume pointing to the different chosen path.</p><p><strong>Be sure to replicate this data directory to keep your markets running in case of hardware failures. You can restore the access of your funds and the markets with your mnemonic seed</strong></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="run"></a>Run<a class="hash-link" href="#run" title="Direct link to heading">#</a></h2><p>Use one of the following methods to run a TDEX daemon on your machine:</p><ul><li><a href="#run-with-docker">Docker</a></li><li><a href="#run-standalone">Standalone</a></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="run-with-docker"></a>Run with Docker<a class="hash-link" href="#run-with-docker" title="Direct link to heading">#</a></h2><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="pull-from-github-packages"></a>Pull from Github Packages<a class="hash-link" href="#pull-from-github-packages" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><div tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ docker pull ghcr.io/tdex-network/tdexd:latest</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="start-the-daemon"></a>Start the daemon<a class="hash-link" href="#start-the-daemon" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><div tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain"># Run on Liquid network connecting to blockstream.info for sourcing blockchain data</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ docker run -it -d --name tdexd --restart unless-stopped -p 9945:9945 -p 9000:9000 -v `pwd`/tdexd:/.tdex-daemon ghcr.io/tdex-network/tdexd:latest</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"># Run on Liquid connecting to a local explorer</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ docker run -it -d --name tdexd --restart unless-stopped -p 9945:9945 -p 9000:9000 -v `pwd`/tdexd:/.tdex-daemon -e TDEX_EXPLORER_ENDPOINT=&quot;http://127.0.0.1:3001&quot; ghcr.io/tdex-network/tdexd:latest</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"># Run on Liquid connecting to a local Elements node</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ docker run -it -d --name tdexd --restart unless-stopped -p 9945:9945 -p 9000:9000 -v &#x27;pwd&#x27;/tdexd:/.tdexd -e TDEX_ELEMENTS_RPC_ENDPOINT=&quot;http://rpcuser:rpcpassword@127.0.0.1:7041&quot; ghcr.io/tdex-network/tdexd:latest</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"># Run on Regtest connecting to a local explorer and using regtest LBTC asset hash.</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ docker run -it -d --name tdexd --restart unless-stopped -p 9945:9945 -p 9000:9000 -v `pwd`/tdexd:/.tdex-daemon -e TDEX_NETWORK=&quot;regtest&quot; -e TDEX_BASE_ASSET=&quot;5ac9f65c0efcc4775e0baec4ec03abdde22473cd3cf33c0419ca290e0751b225&quot; -e TDEX_EXPLORER_ENDPOINT=&quot;http://127.0.0.1:3001&quot;  ghcr.io/tdex-network/tdexd:latest</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"># Run on Liquid and specify USDt as base asset instead of default L-BTC</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ docker run -it -d --name tdexd --restart unless-stopped -p 9945:9945 -p 9000:9000 -v `pwd`/tdexd:/.tdex-daemon -e TDEX_BASE_ASSET=&quot;ce091c998b83c78bb71a632313ba3760f1763d9cfcffae02258ffa9865a37bd2&quot; ghcr.io/tdex-network/tdexd:latest</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>This will mount the data directory in a folder called <code>tdexd</code> in your current path.</p><p>See <a href="#environment-variables">Enviroment Variables</a> for all available options.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="check-the-logs"></a>Check the Logs<a class="hash-link" href="#check-the-logs" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><div tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ docker logs tdex</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">INFO[0000] trader interface is listening on :9945</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">INFO[0000] operator interface is listening on :9945</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="use-the-operator-cli"></a>Use the operator CLI<a class="hash-link" href="#use-the-operator-cli" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><div tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ alias tdex=&#x27;docker exec -it tdexd tdex&#x27;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Now you are ready to <a href="#deposit-funds">deposit funds</a> to create your first market and start accepting incoming trades.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="run-standalone"></a>Run standalone<a class="hash-link" href="#run-standalone" title="Direct link to heading">#</a></h2><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="install"></a>Install<a class="hash-link" href="#install" title="Direct link to heading">#</a></h4><ol><li><p><a href="https://github.com/tdex-network/tdex-daemon/releases" target="_blank" rel="noopener noreferrer">Download the latest release for MacOS or Linux</a></p></li><li><p>Move daemon and cli into a folder in your PATH (eg. <code>/usr/local/bin</code>) and rename the daemon as <code>tdexd</code> and the cli as <code>tdex</code></p></li><li><p>Give executable permissions. (eg. <code>chmod a+x /usr/local/bin/tdexd</code> and <code>chmod a+x /usr/local/bin/tdex</code>)</p></li></ol><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="run-1"></a>Run<a class="hash-link" href="#run-1" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><div tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain"># Run on Liquid network connecting to blockstream.info for sourcing blockchain data</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ tdexd</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"># Run on Liquid connecting to a local explorer</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ export TDEX_EXPLORER_ENDPOINT=&quot;http://127.0.0.1:3001&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ tdexd</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"># Run on Liquid connecting to a local Elements node</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ export TDEX_ELEMENTS_RPC_ENDPOINT=&quot;http://rpcuser:rpcpassword@127.0.0.1:7041&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ tdexd</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"># Run on Regtest connecting to a local explorer and using regtest LBTC asset hash.</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ export TDEX_NETWORK=&quot;regtest&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ export TDEX_BASE_ASSET=&quot;5ac9f65c0efcc4775e0baec4ec03abdde22473cd3cf33c0419ca290e0751b225&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ export TDEX_EXPLORER_ENDPOINT=&quot;http://127.0.0.1:3001&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ tdexd</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"># Run on Liquid and specify USDt as base asset instead of default L-BTC</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ export TDEX_BASE_ASSET=&quot;ce091c998b83c78bb71a632313ba3760f1763d9cfcffae02258ffa9865a37bd2&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ tdexd</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>This will mount the data directory in a folder called <code>.tdex-daemon</code> in your <code>$HOME</code>.</p><p>See <a href="#environment-variables">Environment Variables</a> for all available options.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="use-the-operator-cli-1"></a>Use the operator CLI<a class="hash-link" href="#use-the-operator-cli-1" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><div tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ tdex --help</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Now you are ready to <a href="#deposit-funds">deposit funds</a> to create your first market and start accepting incoming trades.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="environment-variables"></a>Environment variables<a class="hash-link" href="#environment-variables" title="Direct link to heading">#</a></h2><p>The list of available variables can be found <a href="https://pkg.go.dev/github.com/tdex-network/tdex-daemon/config" target="_blank" rel="noopener noreferrer">here</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="deposit-funds"></a>Deposit funds<a class="hash-link" href="#deposit-funds" title="Direct link to heading">#</a></h2><p>To start a market, you need to deposit two reserves of two <strong>Liquid assets</strong> for the pair (called <strong>Market</strong>) you are providing liquidity for. Each <strong>Market</strong> has a BASE ASSET, which is always the same per daemon, and a QUOTE ASSET.</p><p>To determine the spot price you can adopt different strategies, at the moment the supported one are <strong>PLUGGABLE</strong> and <strong>BALANCED</strong>.</p><p>The PLUGGABLE strategy expects you to update the price manually, plugging in an external price feed that need to call the <code>UpdateMarketPrice</code> rpc method of the operator interface.</p><p>The BALANCED strategy (this is the default when you create a market) uses <strong>Automated Market Making</strong> to determine the spot price. The initial ratio of the two amounts you deposit will represent the price of the first trade you accept in.
From that point on, the <strong>automated market making strategy will self regulate the trading price</strong>. It follows the <em>constant product market-making</em> formula. Every transaction that occurs on this market will adjust the prices of the market accordingly. It&#x27;s a basic supply and demand automated market making system.</p><p>The following commands will uses the operator cli <code>tdex</code> to call the gRPC <strong>operator</strong> interface of <code>tdexd</code>. By default running on localhost on port 9000.</p><ul><li>Initialize the local state of the CLI.</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><div tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain"># By default it looks for the daemon operator gRPC interface on localhost:9000</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ tdex config init</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"># If the daemon is running on regtest</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ tdex config init --network regtest --explorer_url http://localhost:3001</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"># or on a remote machine</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ tdex config init --rpcserver example.com:9000</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ul><li>You can always check the current state with the following command</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><div tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ tdex config</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ul><li>Create a new mnemonic seed (only the first time)</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><div tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ tdex genseed</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ul><li>Initialize the wallet (only the first time or after a restore from seed)</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><div tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ tdex init --seed &lt;generatedSeed&gt; --password &lt;mypassword&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ul><li><strong>OR</strong> import and restore an existing wallet</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><div tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ tdex init --seed &lt;mySeed&gt; --password &lt;mypassword&gt; --restore</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ul><li>Unlock the wallet with chosen password</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><div tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ tdex unlock --password &lt;mypassword&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ul><li><p>You can manually deposit funds to the daemon wallet:</p><ul><li>Get a deposit address from the fee account</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ tdex depositfee</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Now send some L-BTC that will be used to subsidize liquid network fees.</p><ul><li>Claim the deposits for the fee account</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ tdex claimfee --outpoints &#x27;[{&quot;hash&quot;: &lt;txid&gt;, &quot;index&quot;: &lt;vout&gt;}]&#x27;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>v Create a Market and get a new deposit address.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><div tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ tdex depositmarket</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Now send some base asset (by default is LBTC) and quote asset of choice in that address, such as USDt or LCAD.</p><ul><li>Claim the deposits for the market</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ tdex config set base_asset &lt;BaseAssetHash&gt;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ tdex config set quote_asset &lt;QuoteAssetHash&gt;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ tdex claimmarket --outpoints &#x27;[{&quot;hash&quot;: &lt;txid&gt;, &quot;index&quot;: &lt;vout&gt;}, {...}]&#x27;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="new-concurrent-swap-requests"></a>NEW: CONCURRENT SWAP REQUESTS<a class="hash-link" href="#new-concurrent-swap-requests" title="Direct link to heading">#</a></h3><p>You can make use of the fragmenter tool, an interactive process that let&#x27;s you send all the funds to a temporary wallet that splits the total amount into smaller fragments, increasing the capabilities of the daemon to serve an higher number of concurrent trade requests:</p><ul><li><p>Get a temporary address to send fee account&#x27;s funds to:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><div tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ tdex fragmentfee</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p> After having generated and showed the temporary wallet&#x27;s address, the commands waits for you to insert the txid of the funding tx(s).<br>
Press <em>ENTER</em> to confirm and continue the process in order to calculate the optimal number of fragments based on the amount detected and send the fragmented deposits to the daemon&#x27;s fee account.</p><p>NOTICE: If, for any reason, the process fails (like for example you pasted the wrong txid) you can resume it with:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><div tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ tdex fragmentfee --txid </span><span class="token operator">&lt;</span><span class="token plain">txid</span><span class="token operator file-descriptor important">1</span><span class="token operator">&gt;</span><span class="token plain"> --txid </span><span class="token operator">&lt;</span><span class="token plain">txid</span><span class="token operator file-descriptor important">2</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>  The process is smart enough to recognize if any previous one exited before being completed. In that case, it expects you to resume by providing the list of funding txids. If this time everything&#x27;s allright, the process will complete as described above, otherwise you&#x27;ll need to repeat the reseume again. Only after a fragmentation process is completed, it is possible to go for anotherone.</p></li><li><p>Get a temporary address to send market&#x27;s funds to:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><div tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ tdex fragmentmarket</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">#Â INFO[0000] send funds to address: el1qqf9w40vhwnq0rjejfuv0l4hlhgc6zwdacftra5yd3rakl8s3y0pn3078ul8jh5dhfg7rpceu2xt8wyx92wz9swqsm2p6fcjvq</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">#Â INFO[0000] Enter txid of fund(s) separated by a white space [press ENTER to skip or confirm]:</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>  Fund the temporary wallet&#x27;s address and insert the txid of the funding txs.<br>
Press <em>ENTER</em> to confirm and continue the process in order to calculate the optimal number of fragments and to send the fragmented deposits to the daemon&#x27;s market account.</p><p>NOTICE: If, for any reason, the process fails, the same resume flow described above applies for <code>fragmentmarket --txid &lt;txid1&gt; ...</code>.</p></li><li><p>You can check the status of the market</p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><div tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ tdex listmarket</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ul><li>Optional: You can get a new deposit address for an already created and funded market passing the optional flag</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><div tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ tdex depositmarket --base_asset &lt;BaseAssetHash&gt; --quote_asset &lt;QuoteAssetHash&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="manage-markets"></a>Manage markets<a class="hash-link" href="#manage-markets" title="Direct link to heading">#</a></h2><ul><li>Select the market</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><div tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ tdex config set base_asset &lt;BaseAssetHash&gt;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ tdex config set quote_asset &lt;QuoteAssetHash&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>You can always check the current state with the following command</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><div tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ tdex config</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Now the following commands will be launch against this market.</p><ul><li>Open the market using automated market making</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><div tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ tdex open</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>This makes the selected market available for trading using the BALANCED market strategy</p><ul><li>Close the market</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><div tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ tdex close</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>This makes the selected market NOT available for trading.</p><ul><li>Update the percentage fee</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><div tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ tdex percentagefee --basis_point 100</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>This updates the current market percentage fee to 1% (by default it&#x27;s 0.25%).</p><ul><li>Update the fixed fee</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><div tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ tdex fixedfee --base_fee 600 --quote_fee 20000</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>This updates the current market fixed fees (by default they&#x27;re 0).</p><ul><li>Change market making strategy to pluggable</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><div tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ tdex strategy --pluggable</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ul><li>Update the price</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><div tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ tdex price --base_price=16000 --quote-price=0.001</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>This updates the current market price to be used for future trades.</p><ul><li>Open the market again</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><div tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">$ tdex open</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/tdex-network/dev-portal/edit/master/docs/provider/daemon.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/provider/intro"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Overview</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/provider/registry"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Registry Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link">Overview</a></li><li><a href="#data-directory" class="table-of-contents__link">Data directory</a></li><li><a href="#run" class="table-of-contents__link">Run</a></li><li><a href="#run-with-docker" class="table-of-contents__link">Run with Docker</a><ul><li><a href="#check-the-logs" class="table-of-contents__link">Check the Logs</a></li><li><a href="#use-the-operator-cli" class="table-of-contents__link">Use the operator CLI</a></li></ul></li><li><a href="#run-standalone" class="table-of-contents__link">Run standalone</a><ul><li><a href="#use-the-operator-cli-1" class="table-of-contents__link">Use the operator CLI</a></li></ul></li><li><a href="#environment-variables" class="table-of-contents__link">Environment variables</a></li><li><a href="#deposit-funds" class="table-of-contents__link">Deposit funds</a><ul><li><a href="#new-concurrent-swap-requests" class="table-of-contents__link">NEW: CONCURRENT SWAP REQUESTS</a></li></ul></li><li><a href="#manage-markets" class="table-of-contents__link">Manage markets</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/trader/intro">Trader</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/provider/intro">Liquidity Provider</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://twitter.com/tdexnetwork" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/tdex-network" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 TDEX Network. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.44ec4ed4.js"></script>
<script src="/assets/js/main.2a65be00.js"></script>
</body>
</html>