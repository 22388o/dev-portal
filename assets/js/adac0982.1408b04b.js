"use strict";(self.webpackChunkdev_portal=self.webpackChunkdev_portal||[]).push([[7827],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return m}});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var d=a.createContext({}),l=function(e){var t=a.useContext(d),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},p=function(e){var t=l(e.components);return a.createElement(d.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,d=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),u=l(n),m=o,f=u["".concat(d,".").concat(m)]||u[m]||c[m]||r;return n?a.createElement(f,s(s({ref:t},p),{},{components:n})):a.createElement(f,s({ref:t},p))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,s=new Array(r);s[0]=u;var i={};for(var d in t)hasOwnProperty.call(t,d)&&(i[d]=t[d]);i.originalType=e,i.mdxType="string"==typeof e?e:o,s[1]=i;for(var l=2;l<r;l++)s[l]=n[l];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},4780:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return i},contentTitle:function(){return d},metadata:function(){return l},toc:function(){return p},default:function(){return u}});var a=n(7462),o=n(3366),r=(n(7294),n(3905)),s=["components"],i={title:"Deposit funds",sidebar_position:1},d=void 0,l={unversionedId:"provider/daemon/fee/deposit_funds",id:"provider/daemon/fee/deposit_funds",isDocsHomePage:!1,title:"Deposit funds",description:"The daemon is designed to pay for Liquid network fees to include a transaction in the blockchain, whether it is a trade between the daemon and a trader or a withdraw from one of the HD wallet accounts.",source:"@site/docs/provider/daemon/fee/deposit_funds.md",sourceDirName:"provider/daemon/fee",slug:"/provider/daemon/fee/deposit_funds",permalink:"/docs/provider/daemon/fee/deposit_funds",editUrl:"https://github.com/tdex-network/dev-portal/edit/master/docs/provider/daemon/fee/deposit_funds.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"Deposit funds",sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Init & Unlock",permalink:"/docs/provider/daemon/init_daemon"},next:{title:"Manage account",permalink:"/docs/provider/daemon/fee/manage_account"}},p=[{value:"Manually deposit funds",id:"manually-deposit-funds",children:[]},{value:"Fragmenter",id:"fragmenter",children:[]}],c={toc:p};function u(e){var t=e.components,n=(0,o.Z)(e,s);return(0,r.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"The daemon is designed to pay for Liquid network fees to include a transaction in the blockchain, whether it is a trade between the daemon and a trader or a withdraw from one of the HD wallet accounts."),(0,r.kt)("p",null,"The Fee account is the very first account you should send funds to. This account is designed to handle only LBTCs funds. If you deposit funds of some other asset type you'll stll be able to withdraw them."),(0,r.kt)("p",null,"Since this account is meant to only pay for network fees, it will need to cover very low amounts, like ~700 sats/vbyte per transaction is its a trade, even lower for withdrawls. Therefore, it is suggested to fund it with multiple UTXOs with small amounts like for example 2000 or 5000 sats.  "),(0,r.kt)("p",null,"You can either ",(0,r.kt)("a",{parentName:"p",href:"#manually-deposit-funds"},"manually deposit funds")," into the Fee account or you can make use of the ",(0,r.kt)("a",{parentName:"p",href:"#fragmenter"},"Fragmenter"),' tool that facilitates the process of splitting few funds with "big" amounts into many fragments with smaller amounts.'),(0,r.kt)("h2",{id:"manually-deposit-funds"},"Manually deposit funds"),(0,r.kt)("p",null,"Get some deposit address(es):"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'$ tdex fee deposit\n# {\n#   "address": "el1qqdxwu2769zwkp9gn7pfl9vdvelfhjc6hk8v56wtpn6aww7h8ckhme7tj6hggvw3ycyn9epqlwzzml5yhdn9sv0dlxu676nr5k",\n#   "blinding": "7a01d7ce7367bcd4b444f34f00580dbef5b617447a3e07cf07c8883c34a1e0d8"\n# }\n')),(0,r.kt)("p",null,"Use the ",(0,r.kt)("inlineCode",{parentName:"p"},"--num_of_addresses")," flag to get more than one address to send funds to."),(0,r.kt)("p",null,"Now send some L-BTC to the address(es) and ",(0,r.kt)("strong",{parentName:"p"},"only after")," the transaction(s) gets confirmed, you can claim the deposits for the fee account:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'$ tdex fee claim --outpoints \'[{"hash": 248a47a99ae3e6de93a614a05ab1c0e064aa9ea2fb292bfa1b33c48b067cac10, "index": 1}]\'\n\n# fee account is funded\n')),(0,r.kt)("p",null,"That's it! You have funded the fee account. Now you can take a look at how to ",(0,r.kt)("a",{parentName:"p",href:"/docs/provider/daemon/fee/manage_account"},"manage this account")," or you can proceed with ",(0,r.kt)("a",{parentName:"p",href:"/docs/provider/daemon/market/deposit_funds"},"creating and funding a new market"),"."),(0,r.kt)("h2",{id:"fragmenter"},"Fragmenter"),(0,r.kt)("p",null,"The fragmenter is an interactive process that helps you splitting few UTXOs into many fragments of ",(0,r.kt)("inlineCode",{parentName:"p"},"5000")," satoshis. It makes use of an ephemeral single-key wallet that is no longer used after the process is completed (or aborted).  "),(0,r.kt)("p",null,"To start the fragmenter for the Fee account run:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ tdex fragmentfee\n#\xa0INFO[0000] send funds to address: el1qqtqj6psznm2km5axsj8qxgduzzznzjvmxfs3qh7h83hsp72hp0s5hzzwlzv92cgr44qtl4krrykddyv6xtcmvpusqraynmn0k\n#\xa0INFO[0000] Enter txid of fund(s) separated by a white space [press ENTER to skip or confirm]:\n")),(0,r.kt)("p",null,"After generating and showing the ephemeral address, the command waits for you to prompt the txid of the funding tx(s).",(0,r.kt)("br",{parentName:"p"}),"\n","Press ",(0,r.kt)("em",{parentName:"p"},"ENTER")," to confirm and continue the process: the tool calculates the optimal number of fragments based on the amount detected and sends the deposit fragments to the daemon's fee account."),(0,r.kt)("p",null,"You can optionally start the fragmenter by specifying the max number of possible fragments it is allowed to create. By default it is set to 50 if not specified:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ tdex fragmentfee --max_fragments 20\n")),(0,r.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Take into account that the --max_fragments value basically defines the max number of outputs for the Fee account's deposit transaction.",(0,r.kt)("br",{parentName:"p"}),"\n","In the Liquid network, transactions that weights more that 100K vBytes are rejected for being too heavy, therefore you should set this value at max to ",(0,r.kt)("inlineCode",{parentName:"p"},"70")," or you'll risk to bump into this issue."))),(0,r.kt)("p",null,"If, for any reason, the process fails (like for example you pasted the wrong txid, or you forgot to unlock the wallet before this step) you can always resume it with:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ tdex fragmentfee --txid <txid1> --txid <txid2> ...\n")),(0,r.kt)("p",null,"The fragmenter is smart enough to recognize if any previous attempt exited before being completed. In that case, it expects you to resume that one by providing the list of funding txids. If this time everything's allright, the process will complete as described above. Only after a fragmentation process is completed, it is possible to go for another one."),(0,r.kt)("p",null,'Another option is to abort the pending process instead of resuming it and send the "stuck" funds back to an address of yours instead of depositing them into the daemon HD wallet:'),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ tdex fragmentfee --recover_funds_to_address <address>\n")),(0,r.kt)("p",null,"This will send all the funds owned by the fragmenter to the specified address and abort the process instead of completing it."),(0,r.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"If you have funds stuck on the ephemeral wallet of the fragmenter, it is strongly suggested to backup your operator CLI datadir (usually located at ",(0,r.kt)("inlineCode",{parentName:"p"},"~/.tdex-operator")," in Linux or ",(0,r.kt)("inlineCode",{parentName:"p"},"~/Library/Application\\ Support/Tdex-operator")," in OSX) as long as you haven't completed or aborted the process, in order to prevent loosing them if you delete the datadir by accident."))),(0,r.kt)("p",null,"This is all you have to do, the fragmenter will take care all the rest. Once the process is completed you'll be ready to ",(0,r.kt)("a",{parentName:"p",href:"/docs/provider/daemon/market/deposit_funds"},"create and deposit funds to a new market"),", but still consider taking a look also at how you can ",(0,r.kt)("a",{parentName:"p",href:"/docs/provider/daemon/fee/manage_account"},"manage the fee account"),"."))}u.isMDXComponent=!0}}]);