"use strict";(self.webpackChunkdev_portal=self.webpackChunkdev_portal||[]).push([[7827],{3905:function(e,t,n){n.d(t,{Zo:function(){return l},kt:function(){return f}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var d=a.createContext({}),c=function(e){var t=a.useContext(d),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},l=function(e){var t=c(e.components);return a.createElement(d.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,d=e.parentName,l=i(e,["components","mdxType","originalType","parentName"]),p=c(n),f=r,m=p["".concat(d,".").concat(f)]||p[f]||u[f]||o;return n?a.createElement(m,s(s({ref:t},l),{},{components:n})):a.createElement(m,s({ref:t},l))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,s=new Array(o);s[0]=p;var i={};for(var d in t)hasOwnProperty.call(t,d)&&(i[d]=t[d]);i.originalType=e,i.mdxType="string"==typeof e?e:r,s[1]=i;for(var c=2;c<o;c++)s[c]=n[c];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},4780:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return i},contentTitle:function(){return d},metadata:function(){return c},toc:function(){return l},default:function(){return p}});var a=n(7462),r=n(3366),o=(n(7294),n(3905)),s=["components"],i={title:"Deposit funds",sidebar_position:1},d=void 0,c={unversionedId:"provider/daemon/fee/deposit_funds",id:"provider/daemon/fee/deposit_funds",isDocsHomePage:!1,title:"Deposit funds",description:"The daemon is designed to pay for Liquid network fees to include a transaction in the blockchain, whether it is a trade between the daemon and a trader or a withdraw from one of the HD wallet accounts.",source:"@site/docs/provider/daemon/fee/deposit_funds.md",sourceDirName:"provider/daemon/fee",slug:"/provider/daemon/fee/deposit_funds",permalink:"/docs/provider/daemon/fee/deposit_funds",editUrl:"https://github.com/tdex-network/dev-portal/edit/master/docs/provider/daemon/fee/deposit_funds.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"Deposit funds",sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Init & Unlock",permalink:"/docs/provider/daemon/init_daemon"},next:{title:"Manage account",permalink:"/docs/provider/daemon/fee/manage_account"}},l=[{value:"Manually deposit funds",id:"manually-deposit-funds",children:[]},{value:"Fragmenter",id:"fragmenter",children:[]}],u={toc:l};function p(e){var t=e.components,n=(0,r.Z)(e,s);return(0,o.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"The daemon is designed to pay for Liquid network fees to include a transaction in the blockchain, whether it is a trade between the daemon and a trader or a withdraw from one of the HD wallet accounts."),(0,o.kt)("p",null,"The Fee account is the very first account you should send funds to. This account is designed to handle only LBTCs funds. If you deposit funds of some other asset type you'll stll be able to withdraw them."),(0,o.kt)("p",null,"Since this account is meant to only pay for network fees, it will need to cover very low amounts, like ~700 sats/vbyte per transaction is its a trade, even lower for withdrawls. Therefore, it is suggested to fund it with multiple UTXOs with small amounts like for example 2000 or 5000 sats.  "),(0,o.kt)("p",null,"You can either ",(0,o.kt)("a",{parentName:"p",href:"#manually-deposit-funds"},"manually deposit funds")," into the Fee account or you can make use of the ",(0,o.kt)("a",{parentName:"p",href:"#fragmenter"},"Fragmenter"),' tool that facilitates the process of splitting few funds with "big" amounts into many fragments with smaller amounts.'),(0,o.kt)("h2",{id:"manually-deposit-funds"},"Manually deposit funds"),(0,o.kt)("p",null,"Get some deposit address(es):"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'$ tdex fee deposit\n# {\n#   "address": "el1qqdxwu2769zwkp9gn7pfl9vdvelfhjc6hk8v56wtpn6aww7h8ckhme7tj6hggvw3ycyn9epqlwzzml5yhdn9sv0dlxu676nr5k",\n#   "blinding": "7a01d7ce7367bcd4b444f34f00580dbef5b617447a3e07cf07c8883c34a1e0d8"\n# }\n')),(0,o.kt)("p",null,"Use the ",(0,o.kt)("inlineCode",{parentName:"p"},"--num_of_addresses")," flag to get more than one address to send funds to."),(0,o.kt)("p",null,"Now send some L-BTC to the address(es) and ",(0,o.kt)("strong",{parentName:"p"},"only after")," the transaction(s) gets confirmed, you can claim the deposits for the fee account:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'$ tdex fee claim --outpoints \'[{"hash": 248a47a99ae3e6de93a614a05ab1c0e064aa9ea2fb292bfa1b33c48b067cac10, "index": 1}]\'\n\n# fee account is funded\n')),(0,o.kt)("p",null,"That's it! You have funded the fee account. Now you can take a look at how to ",(0,o.kt)("a",{parentName:"p",href:"/docs/provider/daemon/fee/manage_account"},"manage this account")," or you can proceed with ",(0,o.kt)("a",{parentName:"p",href:"/docs/provider/daemon/market/deposit_funds"},"creating and funding a new market"),"."),(0,o.kt)("h2",{id:"fragmenter"},"Fragmenter"),(0,o.kt)("p",null,"The fragmenter helps you splitting few UTXOs into many fragments of ",(0,o.kt)("inlineCode",{parentName:"p"},"5000")," satoshis each, becoming funds of the daemon's Fee account. It makes use of an ephemeral single-key wallet that is discarded after the process is completed or aborted. A brand new wallet is used for every new fragmentation."),(0,o.kt)("p",null,"Starting the process is as simple as running the command below:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"$ tdex fee deposit --fragment [--max_fragments]\n# send funds to the following address: el1qqtqj6psznm2km5axsj8qxgduzzznzjvmxfs3qh7h83hsp72hp0s5hzzwlzv92cgr44qtl4krrykddyv6xtcmvpusqraynmn0k\n#\xa0press ENTER to continue after the funds have been trasferred to the fragmenter:\n# \n# ***** after pressing ENTER *****\n# \n# fetching funds for ephemeral wallet\n# \n# calculating fragments for LBTC funds\n# \n# detected 2 fund(s) of total amount 100000 that will be split into 20 fragments\n# \n# crafting fee deposit transaction\n# \n# broadcasting transaction\n# \n# fee account funding transaction: d76c79295ad3ba56480bd3829ab2f058189bb1fc32eebf4b8c326d2369fcb1de\n# \n# claiming deposits for fee account\n# \n# fragmentation succeeded\n")),(0,o.kt)("p",null,"You can optionally set the max number of fragments that can be generated when splitting the funds sent to the ephemeral wallet.",(0,o.kt)("br",{parentName:"p"}),"\n","By default, this value is set to ",(0,o.kt)("inlineCode",{parentName:"p"},"50")," and is highly discouraged to increase it because transactions with too many outputs won't be included in blockchain becuase their weight could exceed the max tx size of 100K bytes."),(0,o.kt)("p",null,"When you funded the ephemeral wallet address and the transaction has been included in blockchain, you can press ",(0,o.kt)("em",{parentName:"p"},"ENTER")," and the process will continue by fetching the utxos of the ephemeral wallet and splitting them into multiple deposits for the Fee account."),(0,o.kt)("p",null,"If for any reason the fragmentation does not succeed you can retry by running the same command again and just pressing ",(0,o.kt)("em",{parentName:"p"},"ENTER"),".",(0,o.kt)("br",{parentName:"p"}),"\n","The ephemeral wallet does not change until the process is either completed or aborted."),(0,o.kt)("p",null,"To abort a fragmentation, you can run:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"$ tdex fee deposit --fragment --recover_funds_to_address el1qqwg8mnllqtlh8fhcvwfjqt8eapptmh2l39cegs0a89qyu9hp6upyg8tu35l9z83crtqrrgps8ma4fn358sghku2d3e378y7aw\n# press ENTER to continue after the funds have been trasferred to the fragmenter\n#\n# fetching funds for ephemeral wallet\n#\n# found 1 unspents with amount per asset:\n#\n# 5ac9f65c0efcc4775e0baec4ec03abdde22473cd3cf33c0419ca290e0751b225: 99999868 (network fees deducted)\n#\n# crafting recover trasaction\n#\n# broadcasting transaction\n#\n# sent all ephemeral wallet funds to address el1qqwg8mnllqtlh8fhcvwfjqt8eapptmh2l39cegs0a89qyu9hp6upyg8tu35l9z83crtqrrgps8ma4fn358sghku2d3e378y7aw in tx: 71d1af7be9f2c74b6b83dfb13dc2e046e817ec01b9255344b8be1359a9b3a778\n#\n# recover succeeded\n")),(0,o.kt)("p",null,"Change the address in the example with an address of yours. Press ",(0,o.kt)("em",{parentName:"p"},"ENTER")," when asked, and the fragmenter will send back all its funds to your address and abort the process so a new one can eventually be done later."),(0,o.kt)("p",null,"That's it. As you can see the fragmenter is really handful because it helps depositing funds to the daemon with just one command. Once the process is completed you're ready to ",(0,o.kt)("a",{parentName:"p",href:"/docs/provider/daemon/market/deposit_funds"},"create and deposit funds to a new market"),", but still consider taking a look also at how you can ",(0,o.kt)("a",{parentName:"p",href:"/docs/provider/daemon/fee/manage_account"},"manage the fee account"),"."))}p.isMDXComponent=!0}}]);